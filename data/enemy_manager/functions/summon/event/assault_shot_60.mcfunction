##############################
### アサルトショット召喚 - Event  
##############################

# 振り向き 
tp @s ~ ~ ~ facing entity @a[gamemode=!creative,gamemode=!spectator,sort=nearest,limit=1] 

function calc_manager:set_random 
scoreboard players operation @s Global %= $3 Const 

function entity_manager:lock/lock 

# ランダムパターン1 - カタストロフィー 

# 何秒硬直するかはunluckの秒で指定。 
execute if score @s Global matches 0 run effect give @s minecraft:unluck 4 1 true 
execute if score @s Global matches 0 run summon minecraft:experience_orb ~ ~ ~ {Value:0s,Air:60s,PortalCooldown:5,Tags:["CooldownRequired","Projectile","AimOnInit","LateInitializer"],Passengers:[{id:"minecraft:area_effect_cloud",PortalCooldown:10,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:35f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","FlowingLava"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]},{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit"],Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","FlowingLava"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]},{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:325f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","FlowingLava"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:20,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:16f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","FlowingLava"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]},{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:344f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","FlowingLava"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:30,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:35f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]},{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit"],Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]},{id:"minecraft:fireball",CustomName:"\"カタストロフィー\"",Tags:["TickingRequired","AimOnInit","Direction"],FallDistance:325f,Air:800s,PortalCooldown:200,ExplosionPower:4,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"カタストロフィー\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]}]} 

# ランダムパターン2 - アサルトバスター 

# 何秒硬直するかはunluckの秒で指定。 
execute if score @s Global matches 1 run effect give @s minecraft:unluck 5 1 true 
execute if score @s Global matches 1 run summon minecraft:experience_orb ~ ~ ~ {Value:0s,Air:60s,PortalCooldown:5,Tags:["CooldownRequired","Projectile","AimOnInit","LateInitializer"],Passengers:[{id:"minecraft:area_effect_cloud",PortalCooldown:8,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:1001f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:11,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:3003f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:14,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:5005f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:17,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:7007f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:20,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:9009f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:23,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:11011f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:26,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:13013f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:29,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスター\"",Tags:["TickingRequired","RandomRotation","LateEntity","Direction"],FallDistance:15015f,Air:500s,PortalCooldown:200,ExplosionPower:3,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスター\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:3b,Duration:1}]}]}]}]},{id:"minecraft:area_effect_cloud",PortalCooldown:35,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"アサルトバスターEX\"",Tags:["TickingRequired","AimOnInit","LateEntity"],Air:1000s,PortalCooldown:200,ExplosionPower:15,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:flame",Tags:["Cargo","CallOnFin","Event","FlameBurst"],Duration:99,Radius:0.1f,Passengers:[{id:"minecraft:arrow",life:1200,CustomName:"\"アサルトバスターEX\"",PortalCooldown:200,Tags:["TickingRequired","Fire"],Fire:30000s,Color:16728064,CustomPotionEffects:[{Id:7b,Amplifier:5b,Duration:1}]}]}]}]}]} 

#ランダムパターン3 - ディメンションブレイク 
#何秒硬直するかはunluckの秒で指定。 
execute if score @s Global matches 2 run effect give @s minecraft:unluck 3 1 true 
execute if score @s Global matches 2 run summon minecraft:experience_orb ~ ~ ~ {Value:0s,Air:60s,PortalCooldown:5,Tags:["CooldownRequired","Projectile","AimOnInit","LateInitializer"],Passengers:[{id:"minecraft:area_effect_cloud",PortalCooldown:35,Tags:["CooldownRequired","LateInitializer"],Particle:"minecraft:dust 100000000 10000000 0 3",Radius:0.01f,Duration:999,Passengers:[{id:"minecraft:fireball",CustomName:"\"ディメンションブレイク\"",Tags:["TickingRequired","LateEntity"],Air:1000s,PortalCooldown:200,ExplosionPower:0,direction:[0d,0d,0d],Passengers:[{id:"minecraft:area_effect_cloud",Particle:"minecraft:dust 100000000 10000000 0 4",Tags:["Cargo","CallOnFin","Event","DimensionBreak"],Duration:99,Radius:0.1f}]}]}]} 

scoreboard players reset @s Global
