#島の個数(後で変更)
scoreboard players set # _ 46

#進捗の判定
##skylands
execute if entity @s[advancements={area:system/island_capture={skylands.001=true}}] run data modify storage area: capture.skylands.001 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.002=true}}] run data modify storage area: capture.skylands.002 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.003=true}}] run data modify storage area: capture.skylands.003 set value true
# execute if entity @s[advancements={area:system/island_capture={skylands.004=true}}] run data modify storage area: capture.skylands.004 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.005=true}}] run data modify storage area: capture.skylands.005 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.006=true}}] run data modify storage area: capture.skylands.006 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.007=true}}] run data modify storage area: capture.skylands.007 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.008=true}}] run data modify storage area: capture.skylands.008 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.009=true}}] run data modify storage area: capture.skylands.009 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.010=true}}] run data modify storage area: capture.skylands.010 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.011=true}}] run data modify storage area: capture.skylands.011 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.012=true}}] run data modify storage area: capture.skylands.012 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.013=true}}] run data modify storage area: capture.skylands.013 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.014=true}}] run data modify storage area: capture.skylands.014 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.015=true}}] run data modify storage area: capture.skylands.015 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.016=true}}] run data modify storage area: capture.skylands.016 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.017=true}}] run data modify storage area: capture.skylands.017 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.018=true}}] run data modify storage area: capture.skylands.018 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.019=true}}] run data modify storage area: capture.skylands.019 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.020=true}}] run data modify storage area: capture.skylands.020 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.021=true}}] run data modify storage area: capture.skylands.021 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.022=true}}] run data modify storage area: capture.skylands.022 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.023=true}}] run data modify storage area: capture.skylands.023 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.024=true}}] run data modify storage area: capture.skylands.024 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.025=true}}] run data modify storage area: capture.skylands.025 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.026=true}}] run data modify storage area: capture.skylands.026 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.027=true}}] run data modify storage area: capture.skylands.027 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.028=true}}] run data modify storage area: capture.skylands.028 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.029=true}}] run data modify storage area: capture.skylands.029 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.030=true}}] run data modify storage area: capture.skylands.030 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.031=true}}] run data modify storage area: capture.skylands.031 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.032=true}}] run data modify storage area: capture.skylands.032 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.033=true}}] run data modify storage area: capture.skylands.033 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.034=true}}] run data modify storage area: capture.skylands.034 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.035=true}}] run data modify storage area: capture.skylands.035 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.036=true}}] run data modify storage area: capture.skylands.036 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.037=true}}] run data modify storage area: capture.skylands.037 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.038=true}}] run data modify storage area: capture.skylands.038 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.039=true}}] run data modify storage area: capture.skylands.039 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.040=true}}] run data modify storage area: capture.skylands.040 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.041=true}}] run data modify storage area: capture.skylands.041 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.042=true}}] run data modify storage area: capture.skylands.042 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.043=true}}] run data modify storage area: capture.skylands.043 set value true
execute if entity @s[advancements={area:system/island_capture={skylands.044=true}}] run data modify storage area: capture.skylands.044 set value true
# ##flying_island
execute if entity @s[advancements={area:system/island_capture={flying_island.001=true}}] run data modify storage area: capture.flying_island.046 set value true
execute if entity @s[advancements={area:system/island_capture={flying_island.002=true}}] run data modify storage area: capture.flying_island.047 set value true
# ##cloudia
# execute if entity @s[advancements={area:system/island_capture={cloudia.001=true}}] run data modify storage area: capture.cloudia.048 set value true
# execute if entity @s[advancements={area:system/island_capture={cloudia.002=true}}] run data modify storage area: capture.cloudia.049 set value true
# execute if entity @s[advancements={area:system/island_capture={cloudia.003=true}}] run data modify storage area: capture.cloudia.050 set value true

#クリア数抽出
##初期化
scoreboard players set _ Calc 0
##skylands
execute store result score _ _ run data get storage area: capture.skylands
scoreboard players operation _ Calc += _ _
##flying_island
execute store result score _ _ run data get storage area: capture.flying_island
scoreboard players operation _ Calc += _ _
# ##cloudia
# execute store result score _ _ run data get storage area: capture.cloudia
# scoreboard players operation _ Calc += _ _

#パーセント計算
##係数定数
scoreboard players set @s _ 100
##算出
scoreboard players operation # Calc = _ Calc
scoreboard players operation # Calc *= @s _
scoreboard players operation # Calc /= # _

#クリアを通知
execute at @a run playsound minecraft:ui.toast.challenge_complete player @a
title @a title [{"translate":"島 攻略率"},{"score":{"name": "_","objective": "Calc"}},"/",{"score":{"name": "#","objective": "_"}},"(",{"score":{"name": "#","objective": "Calc"}},"%)"]

#リセット
advancement revoke @s only area:system/island_capture
